{"ast":null,"code":"var _jsxFileName = \"/home/juan-ubuntu/marketplace/src/frontend/components/Create.js\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { ethers } from 'ethers';\nimport { Row, Form, Button } from 'react-bootstrap';\nimport { create as ipfsHttpClient } from 'ipfs-http-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst client = ipfsHttpClient('https://ipfs.infura.io:5001/api/v0');\nconst Create = ({\n  marketplace,\n  nft\n}) => {\n  _s();\n  const [image, setImage] = useState('');\n  const [price, setPrice] = useState(null);\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const uploadToIPFS = async event => {\n    event.preventDefault();\n    const file = event.target.files[0];\n    if (typeof file !== 'undefined') {\n      try {\n        const result = await client.add(file);\n        console.log(\"dsadsadd\");\n        console.log(result);\n        console.log(\"dsadsadd453254345\");\n        setImage(`https://ipfs.infura.io/ipfs/${result.path}`);\n      } catch (error) {\n        console.log(\"ipfs image upload error: \", error);\n      }\n    }\n  };\n  const createNFT = async () => {\n    if (!image || !price || !name || !description) return;\n    try {\n      const result = await client.add(JSON.stringify({\n        image,\n        price,\n        name,\n        description\n      }));\n      mintThenList(result);\n    } catch (error) {\n      console.log(\"ipfs uri uload error: \", error);\n    }\n  };\n  const mintThenList = async result => {\n    const uri = `https://ipfs.infura.io/ipfs/${result.path}`;\n    await (await nft.mint(uri)).wait();\n    const id = await nft.tokenCount();\n    await await nft.setApprovalForAll(marketplace.address, true);\n    const listingPrice = ethers.utils.parseEther(price.toString());\n    await (await marketplace.makeItem(nft.address, id, listingPrice)).wait();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid mt-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        role: \"main\",\n        className: \"col-lg-12 mx-auto\",\n        style: {\n          maxWidth: '1000px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content mx-auto\",\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            className: \"g-4\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"file\",\n              required: true,\n              name: \"file\",\n              onChange: uploadToIPFS\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              onChange: e => setName(e.target.value),\n              size: \"lg\",\n              required: true,\n              type: \"text\",\n              placeholder: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              onChange: e => setDescription(e.target.value),\n              size: \"lg\",\n              required: true,\n              as: \"textarea\",\n              placeholder: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              onChange: e => setPrice(e.target.value),\n              size: \"lg\",\n              required: true,\n              type: \"number\",\n              placeholder: \"Price (ETH)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"g-grid px-0\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: createNFT,\n                variant: \"primary\",\n                size: \"lg\",\n                children: \"Create and list NFT!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\n_s(Create, \"CejF301mm3S45QBEXO/SVXCwDzQ=\");\n_c = Create;\nexport default Create;\nvar _c;\n$RefreshReg$(_c, \"Create\");","map":{"version":3,"names":["useState","ethers","Row","Form","Button","create","ipfsHttpClient","jsxDEV","_jsxDEV","client","Create","marketplace","nft","_s","image","setImage","price","setPrice","name","setName","description","setDescription","uploadToIPFS","event","preventDefault","file","target","files","result","add","console","log","path","error","createNFT","JSON","stringify","mintThenList","uri","mint","wait","id","tokenCount","setApprovalForAll","address","listingPrice","utils","parseEther","toString","makeItem","className","children","role","style","maxWidth","Control","type","required","onChange","fileName","_jsxFileName","lineNumber","columnNumber","e","value","size","placeholder","as","onClick","variant","_c","$RefreshReg$"],"sources":["/home/juan-ubuntu/marketplace/src/frontend/components/Create.js"],"sourcesContent":["import { useState } from 'react';\r\nimport { ethers } from 'ethers';\r\nimport { Row, Form, Button } from 'react-bootstrap';\r\nimport { create as ipfsHttpClient } from 'ipfs-http-client';\r\nconst client = ipfsHttpClient('https://ipfs.infura.io:5001/api/v0');\r\n\r\nconst Create = ({ marketplace, nft }) => {\r\n    const [image, setImage] = useState('');\r\n    const [price, setPrice] = useState(null);\r\n    const [name, setName] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const uploadToIPFS = async (event) => {\r\n        event.preventDefault();\r\n        const file = event.target.files[0];\r\n        if (typeof file !== 'undefined') {\r\n            try {\r\n                const result = await client.add(file);\r\n                console.log(\"dsadsadd\")\r\n                console.log(result);\r\n                console.log(\"dsadsadd453254345\")\r\n                setImage(`https://ipfs.infura.io/ipfs/${result.path}`);\r\n            } catch (error) {\r\n                console.log(\"ipfs image upload error: \", error);\r\n            }\r\n        }\r\n    }\r\n    const createNFT = async () => {\r\n        if (!image || !price || !name || !description) return\r\n        try {\r\n            const result = await client.add(JSON.stringify({ image, price, name, description }));\r\n            mintThenList(result);\r\n        } catch (error) {\r\n            console.log(\"ipfs uri uload error: \", error);\r\n        }\r\n    }\r\n    const mintThenList = async (result) => {\r\n        const uri = `https://ipfs.infura.io/ipfs/${result.path}`;\r\n        await (await nft.mint(uri)).wait();\r\n        const id = await nft.tokenCount();\r\n        await (await nft.setApprovalForAll(marketplace.address, true));\r\n        const listingPrice = ethers.utils.parseEther(price.toString());\r\n        await (await marketplace.makeItem(nft.address, id, listingPrice)).wait();\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid mt-5\">\r\n            <div className='row'>\r\n                <main role=\"main\" className='col-lg-12 mx-auto' style={{ maxWidth: '1000px' }}>\r\n                    <div className='content mx-auto'>\r\n                        <Row className='g-4'>\r\n                            <Form.Control\r\n                                type=\"file\"\r\n                                required\r\n                                name=\"file\"\r\n                                onChange={uploadToIPFS} />\r\n                            <Form.Control onChange={(e) => setName(e.target.value)} size=\"lg\" required type=\"text\" placeholder=\"Name\" />\r\n                            <Form.Control onChange={(e) => setDescription(e.target.value)} size=\"lg\" required as=\"textarea\" placeholder=\"Description\"/>\r\n                            <Form.Control onChange={(e) => setPrice(e.target.value)} size=\"lg\" required type=\"number\" placeholder='Price (ETH)' />\r\n                            <div className='g-grid px-0'>\r\n                                <Button onClick={createNFT} variant=\"primary\" size=\"lg\">\r\n                                    Create and list NFT!\r\n                                </Button>\r\n                            </div>\r\n                        </Row>\r\n                    </div>\r\n                </main>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Create;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}